<%= render template: 'layouts/navbar' %>
<% content_for :style do %>
  <link type="text/css" href="//gyrocode.github.io/jquery-datatables-checkboxes/1.2.11/css/dataTables.checkboxes.css" rel="stylesheet" />
<% end %>
<div class="container mt-4">
  <h1 class="text-center mb-4">Liste des Sessionistes</h1>

  <%= link_to  new_sessioniste_path, class: 'btn btn-primary mb-4' do %>
    <i class="fa fa-plus"></i> Nouveau
  <% end %>
  <%= link_to  new_sessionistes_import_path, class: 'btn btn-primary mb-4' do %>
    <i class="fa fa-upload"></i> Importer
  <% end %>

  <table id="sessioniste" class="table table-striped table-bordered" cellspacing="0" width="100%">
    <thead>
      <tr>
        <th></th>
        <th scope="col">Prenoms</th>
        <th scope="col">Nom</th>
        <th scope="col">Nombre participation</th>
        <th scope="col">Age</th>
        <th scope="col">Classe</th>
        <th scope="col">Derniere classe</th>
        <th scope="col">Paroise</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>

    <tbody>
      <% @sessionistes.each do |sessioniste| %>
        <tr>
          <td><%= sessioniste.id %></td>
          <td><%= sessioniste.prenoms %></td>
          <td><%= sessioniste.nom %></td>
          <td><%= sessioniste.nombre_participation %></td>
          <td><%= sessioniste.age %></td>
          <td><%= sessioniste.classe %></td>
          <td><%= sessioniste.derniere_classe %></td>
          <td><%= sessioniste.paroise.nom %></td>
          <td><%= link_to 'Voir', sessioniste %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<% content_for :script do %>
  <script type="text/javascript" src="//gyrocode.github.io/jquery-datatables-checkboxes/1.2.11/js/dataTables.checkboxes.min.js"></script>
  <script>
    $(document).ready(function () {
        var t = $('#sessioniste').DataTable({
            columnDefs: [{
                'targets': 0,
                'checkboxes': {
                  'selectRow': true
                }
            }],
            select: {
                style:    'multi',
            },
            order: [[ 1, 'asc' ]]
        })
    })
  </script>
<% end %>
